/*
 * command_parser.c
 *
 *  Created on: Nov 13, 2023
 *      Author: Admin
 */
#include "command_parser_fsm.h"

void command_parser_fsm(){
	switch (parser_state) {
		case PARSER_INIT:
			if(temp == '!'){
				parser_state = PARSER_END;
HAL_UART_Transmit(&huart2 ,(void*)str, sprintf(str , "1"), 1000);
HAL_UART_Transmit(&huart2, &temp, sizeof(temp), 1000);
			}

			clear();
			break;
		case PARSER_END:
			if(temp == '!' ){
				clear();

			}
//			HAL_UART_Transmit(&huart2, &temp, sizeof(temp), 1000);

			if(temp == '#'){
				memcpy(command_data,buffer,sizeof(buffer));

				HAL_UART_Transmit(&huart2 ,(void*)str, sprintf(str , "2"), 1000);
				HAL_UART_Transmit(&huart2, &temp, sizeof(temp), 1000);
				clear();
//				if(uart_state == UART_IDLING)
//					uart_state = UART_PROCESS;
				parser_state = PARSER_INIT;
			}
			break;
		default:
			break;
	}
}
